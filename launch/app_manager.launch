<launch>
  <!-- app master -->
  <arg name="master" default="true" doc="launch master if enabled"/>
  <arg name="master_address" default="localhost" doc="address for app_manager master"/>
  <arg name="master_port" default="11313" doc="port for app_manager master"/>

  <!-- app list -->
  <arg name="use_applist" default="false" doc="load apps from applist argument"/>
  <arg name="applist" default="" doc="app dirs (space separated)"/>

  <!-- respawn -->
  <arg name="respawn" default="false" doc="respawn app_manager"/>

  <!-- app_manager options -->
  <arg name="enable_app_replacement" default="true"
       doc="Enable app replacement by running another app, or not" />
  <arg name="skip_topic_remapping" default="false"
       doc="Skip name remapping of topic written in interface to app_manager namespace , or not" />

  <!-- internal use -->
  <arg name="app_manager_args" default="--applist $(arg applist)" if="$(arg use_applist)"/>
  <arg name="app_manager_args" default=""                     unless="$(arg use_applist)"/>

  <node pkg="app_manager" type="appmaster" name="appmaster"
        args="-p $(arg master_port)" if="$(arg master)" respawn="$(arg respawn)"/>
  <node pkg="app_manager" type="app_manager" name="app_manager"
        args="$(arg app_manager_args)"
        output="screen" respawn="$(arg respawn)">
    <rosparam subst_value="true">
      interface_master: http://$(arg master_address):$(arg master_port)
      enable_app_replacement: $(arg enable_app_replacement)
      skip_topic_remapping: $(arg skip_topic_remapping)
    </rosparam>
  </node>
</launch>
